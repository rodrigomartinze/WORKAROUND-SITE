@model List<WorkAroundSite.Models.Vacante>
@{
    ViewData["Title"] = "Inicio";
}
@section Styles {
    <link rel="stylesheet" href="~/css/site.css" />
}

<!-- Buscador Fijo Superior (solo en Home) -->
<div class="top-search-bar">
    <div class="search-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input type="text" class="search-input" placeholder="Buscar vacantes, empresas o ubicaciones..." />
        <button class="search-btn">Buscar</button>
    </div>
</div>

<!-- Sección Hero -->
<section class="hero-section">
    <div class="hero-content">
        <!-- Mensaje de Bienvenida -->
        <div class="welcome-message">
            <h1 class="welcome-title">Encuentra tu próximo trabajo ideal</h1>
            <p class="welcome-subtitle">
                Conectamos talento con oportunidades. Descubre miles de vacantes
                de empresas líderes y da el siguiente paso en tu carrera profesional.
            </p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number">@Model.Count</span>
                    <span class="stat-label">Vacantes activas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">200+</span>
                    <span class="stat-label">Empresas confiables</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">1000+</span>
                    <span class="stat-label">Candidatos contratados</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Carousel de Vacantes -->
<section class="vacantes-section">
    <div class="container">
        <h2 class="section-title">Vacantes Destacadas</h2>
        <p class="section-subtitle">Explora las mejores oportunidades laborales disponibles</p>

        <div class="carousel-container">
            <button class="carousel-btn prev-btn" onclick="moveCarousel(-1)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>

            <div class="carousel-track" id="carouselTrack">
                @foreach (var vacante in Model)
                {
                    <div class="vacante-card">
                        <div class="card-header">
                            <div class="company-logo">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z" />
                                </svg>
                            </div>
                            <span class="job-badge">@vacante.Ubicacion</span>
                        </div>
                        <h3 class="job-title">@vacante.Titulo</h3>
                        <p class="company-name">@vacante.Empresa</p>
                        <p class="job-description">@vacante.Descripcion</p>
                        <div class="job-tags">
                            <span class="tag">Ver detalles</span>
                        </div>
                        <div class="card-footer">
                            <span class="salary">Consultar salario</span>
                            <button class="apply-btn" onclick="location.href='/Home/Details/@vacante.Id'">Ver más</button>
                        </div>
                    </div>
                }
            </div>

            <button class="carousel-btn next-btn" onclick="moveCarousel(1)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>

        <div class="carousel-dots" id="carouselDots"></div>
    </div>
</section>

<script>
    let currentSlide = 0;
    const track = document.getElementById('carouselTrack');
    const cards = document.querySelectorAll('.vacante-card');
    const dotsContainer = document.getElementById('carouselDots');

    // Crear dots
    cards.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.classList.add('dot');
        if (index === 0) dot.classList.add('active');
        dot.onclick = () => goToSlide(index);
        dotsContainer.appendChild(dot);
    });

    function moveCarousel(direction) {
        const maxSlide = cards.length - Math.floor(track.offsetWidth / 380);
        currentSlide += direction;

        if (currentSlide < 0) currentSlide = 0;
        if (currentSlide > maxSlide) currentSlide = maxSlide;

        updateCarousel();
    }

    function goToSlide(index) {
        currentSlide = index;
        updateCarousel();
    }

    function updateCarousel() {
        const offset = currentSlide * -380;
        track.style.transform = `translateX(${offset}px)`;

        // Update dots
        document.querySelectorAll('.dot').forEach((dot, index) => {
            dot.classList.toggle('active', index === currentSlide);
        });
    }

    // Auto-play opcional
    setInterval(() => {
        const maxSlide = cards.length - Math.floor(track.offsetWidth / 380);
        if (currentSlide >= maxSlide) {
            currentSlide = 0;
        } else {
            currentSlide++;
        }
        updateCarousel();
    }, 5000);
</script>